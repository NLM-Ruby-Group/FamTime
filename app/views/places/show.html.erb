<div class="container">
<%= link_to "Back", places_path, class:"btn btn-primary btn-sm" %>
<%= link_to 'Edit', edit_place_path,class:"btn btn-info btn-sm"%>


<div class="place-container">
  <div class="row" >
    <div class="col-12 col-lg-6">
        <img src="<%= @place.image[0].url %>" alt="">
     </div>
    <div class="col-12 col-lg-6" id='detail-container'  >
       <h1> <%= @place.name %></h1>
    <h6> <%= @place.address %> </h6>
    <p> Opening Hours : <%= @place.opening_hours.strftime("%H : %M") %> TO <%= @place.closing_hours.strftime("%H : %M") %> </p>
    <iframe
  frameborder="0" style="border:0"
  src="https://www.google.com/maps/embed/v1/place?key=AIzaSyDIsg0eCEGjTAi7K-fk_3V13ZUa4fPf6qI&q=<%= @place.address.tr(" ","+")%>,ho+chi">
</iframe>
  </div>
  </div> <!-- end row -->


  <div class="row"> 
    <div class="col-12">
        <h3>Gallery:</h3>
      </div>
   <% @place.image.each do |image| %>
      <div class="col-6 col-lg-3">
        <img src="<%= image.url %>" alt="">
      </div>
  <% end %>
  </div> <!-- end row w images -->


<div class="row">
  <div class="col-12">
  <h3> Description:</h3>
    <%= @place.description %>  
  </div>
  </div> <!-- end row for description -->


  <!-- CREATE REVIEWS -->
<div class="row">
  <div class="col-12">
    <h3>Reviews:</h3>
  </div>
  <% if current_user %>
  <div class="card" id="comment-form-card">
    <%= form_for([@place,@place.reviews.build]) do |f| %>

      <div class="card-title">
        <p><%= f.text_field :first_name, :value => current_user.first_name.to_s,:readonly => true , size: current_user.first_name.size.to_i %>  <%= f.text_field :last_name, :value => current_user.last_name.to_s, :readonly => true, size: current_user.last_name.size.to_i%> </p>
      </div> <!-- end card title -->
      <div class="card-description">
        <%= f.label :body %>
        <%= f.text_area :body, class:'form-control' %>
        <%= f.label :rating %>
        <%= f.select :rating, (1..5) %>
        <%= f.submit 'Post review', class:'btn btn-primary' %>
      </div>
      <% end %> <!-- end form-->
    </div> <!-- end card -->
    <% else %>
    <%= link_to 'To review, please log in', new_session_path %>
    <% end %> <!-- end if -->
    
  </div> <!-- end col -->
</div> <!-- end review row-->

 <!-- DISPLAY REVIEWS -->
  <div class="row">
    <!-- error in displaying reviews, alwasy have empty card -->
    <% @reviews.each do |review| %>
    <div class="card col-12 card-block comment-display-card">
      <div class="card-title">
      <% review.rating.to_i.times do %>
        <img class='star-icon' src=" <%= star_icon %>" alt=""> 
      <% end %>
        <h6> <%= review.first_name %> <%= review.last_name %></h6>
        <hr>
      </div>
      <div class="card-description">
        <p><%= review.body %> </p>
      </div>
      <h6>
      Created at: <%= review.created_at.strftime("%FT%T") %>
      </h6>
    </div>
    <% end %>
  </div> <!-- end row -->



</div> <!-- end place container -->

</div> <!-- end container -->




